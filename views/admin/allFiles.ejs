<%- include('../includes/head&side.ejs') %>


    <section class="vh-100 gradient-custom  p-4 ">
        <link rel="stylesheet" href="/assets/css/bootstrap-table.min.css">
        <script src="/assets/js/bootstrap-table.min.js"></script>
        <script src="/assets/js/bootstrap-table-zh-CN.min.js"></script>

        <div class="container-fluid">

            <div class="py-3 ">
                <nav class=" navbar navbar-expand-md navbar-dark bg-dark rounded-lg">
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#fileFilterMenu"
                        aria-controls="fileFilterMenu" aria-expanded="false" aria-label="Toggle navigation"> <span
                            class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse " id="fileFilterMenu" style="direction: rtl;">
                        <form onsubmit="event.preventDefault()" class="form-inline my-2 my-lg-0"> <input
                                class="form-control mr-sm-2 " type="text" placeholder="Search">
                            <button class="btn btn-secondary my-2 my-sm-0" type="submit">Search</button>
                        </form>
                        <ul class="navbar-nav  ">
                            <li class="nav-item mx-1">
                                <input onclick="filter(this)"
                                    class="m-0 p-1 text-dark font-weight-bold rounded border border-dark d-inline-flex bg-secondary"
                                    type="button" data-abc="true" value="بدون فیلتر"></input>
                            </li>
                            <li class="nav-item mx-1">
                                <input onclick="filter(this)"
                                    class="m-0 p-1 text-dark font-weight-bold rounded border border-dark d-inline-flex bg-secondary"
                                    type="button" data-abc="true" value="فایل"></input>
                            </li>
                            <li class="nav-item mx-1">
                                <input onclick="return filter(this)"
                                    class="m-0 p-1 text-dark font-weight-bold rounded border border-dark d-inline-flex bg-secondary"
                                    type="button" data-abc="true" value="فایل"></input>
                            </li>
                            <li class="nav-item mx-1" style="direction: ltr;">
                                <button id='uploadFile' type="button" class="btn btn-info my-2 my-sm-0"
                                    data-toggle="modal" data-target="#myModal">بارگذاری</button>
                                <!-- Modal -->
                                <div id="myModal" class="modal fade" role="dialog">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" aria-label="Close"
                                                    data-dismiss="modal"><span class="text-danger"
                                                        aria-hidden="true">×</span></button>
                                                <h4 class="modal-title">بارگذاری فایل</h4>
                                            </div>
                                            <div class="modal-body">
                                                <form name="uploadForm" method='post' action='/admin/uploadFile'
                                                    enctype="multipart/form-data" onsubmit="return validateForm()">
                                                    <label for="fileName">نام فایل (بدون فاصله و نقطه)</label>
                                                    <input type='text' name='fileName' id='fileName'
                                                        class='form-control'>
                                                    <input type='file' name='file' id='file' class='form-control'>
                                                    <br>
                                                    <input type='submit' class='btn btn-info' value='Upload'
                                                        id='btn_upload'>
                                                </form>
                                                <script>
                                                    function validateForm() {
                                                        let x = document.forms["uploadForm"]["fileName"].value;
                                                        if (x == "" || x.includes('.') || x.includes(' ')) {
                                                            alert("نام مناسب برای فایل انتخاب نکرده اید.");
                                                            return false;
                                                        }
                                                    }
                                                </script>
                                                <!-- Preview-->
                                                <div id='preview'></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>

                        </ul>
                    </div>
                </nav>
            </div>
            <div class="row">
                <div class=" container-fluid">
                    <link href="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.css" rel="stylesheet">

                    <script src="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.js"></script>

                    <table id="table" data-toggle="table" data-flat="true" data-search="true"
                        data-url="http://localhost:3000/admin/storage/fileData">
                        <thead>
                            <tr>
                                <th data-field="id" data-sortable="true">ID</th>
                                <th  data-field="thumb" data-sortable="true">thumb</th>
                                <th data-field="fileName" data-sortable="true">fileName</th>
                                <th data-field="ext" data-sortable="true">preview</th>
                            </tr>
                        </thead>
                    </table>

                </div>

            </div>
        </div>


    </section>
    <script>

    </script>
    </body>

    </html>